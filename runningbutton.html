<!doctype html>
<html lang="ru">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <title>Догонялки</title>
  </head>

  <body>
    <h1>Чтобы получить премию, нажмите на красную кнопку</h1>
    <!-- Здесь будет код кнопки -->
    <button class="btn-class-name" id="runawayBtn">
      <span class="back"></span>
      <span class="front"></span>
    </button>
    <!--Здесь подключим скрипт -->
    <script>
      document.addEventListener("DOMContentLoaded", () => {
        const btn = document.getElementById("runawayBtn");

        const btnRect = btn.getBoundingClientRect();

        const centerX = (window.innerWidth - btnRect.width) / 2;
        const centerY = (window.innerHeight - btnRect.height) / 2;

        btn.style.position = "fixed";
        btn.style.left = `${centerX}px`;
        btn.style.top = `${centerY}px`;
        function getMouseCoords(event, btnRect) {
          return {
            x:
              event.clientX -
              (btnRect.left + window.scrollX + btnRect.width / 2),
            y:
              event.clientY -
              (btnRect.top + window.scrollY + btnRect.height / 2),
          };
        }
        function calculateNewPosition(deltaX, deltaY, btnRect) {
          let newX = btnRect.left + deltaX + window.scrollX;
          let newY = btnRect.top + deltaY + window.scrollY;

          newX = Math.max(0, Math.min(newX, window.innerWidth - btnRect.width));
          newY = Math.max(
            0,
            Math.min(newY, window.innerHeight - btnRect.height),
          );

          return { newX, newY };
        }

        btn.addEventListener("mousemove", (event) => {
          const btnRect = btn.getBoundingClientRect();
          const maxDistance = 150;
          const mousePos = getMouseCoords(event, btnRect);

          const deltaX = mousePos.x > 0 ? -maxDistance : maxDistance;
          const deltaY = mousePos.y > 0 ? -maxDistance : maxDistance;

          const { newX, newY } = calculateNewPosition(deltaX, deltaY, btnRect);

          btn.style.left = `${newX}px`;
          btn.style.top = `${newY}px`;
        });
      });
    </script>

    <style>
      /* фон страницы */
      body {
        /* флекс-контейнер */
        display: flex;
        /* выравнивание по центру */
        justify-content: center;
        /* без отступов */
        margin: 0;
        /* цвет фона */
        background-color: #e5e5e5;
      }
      /* стили заголовка */
      h1 {
        /* семейство шрифтов */
        font-family: "Courier New", Courier, monospace;
        /* капитализация символов */
        text-transform: uppercase;
        /* размер шрифта */
        font-size: 26px;
        /* отступы сверху, по бокам и снизу */
        padding: 1em 0 0 1em;
        /* цвет шрифта */
        color: #1a2b4c;
        /* выравнивание по центру */
        text-align: center;
      }
      /* общие стили кнопки */
      .btn-class-name {
        /* основной цвет */
        --primary: 255, 90, 120;
        /* дополнительный цвет */
        --secondary: 150, 50, 60;
        /* ширина */
        width: 60px;
        /* высота */
        height: 50px;
        /* без рамок */
        border: none;
        /* без контура */
        outline: none;
        /* меняем форму курсора на указатель */
        cursor: pointer;
        /* внешний контур */
        outline: 10px solid rgb(var(--primary), 0.5);
        /* полное скругление */
        border-radius: 100%;
        /* относительное позиционирование */
        position: relative;
        /* анимация в течение 0,3 секунды */
        transition: 0.3s;
      }
      /* стили заднего слоя кнопки */
      .btn-class-name .back {
        /* фон */
        background: rgb(var(--secondary));
        /* полное скругление */
        border-radius: 100%;
        /* абсолютное позиционирование */
        position: absolute;
        /* отступ слева */
        left: 0;
        /* отступ сверху */
        top: 0;
        /* ширина */
        width: 100%;
        /* высота */
        height: 100%;
      }
      /* стили переднего слоя кнопки */
      .btn-class-name .front {
        /* фон в виде линейного градиента */
        background: linear-gradient(
          0deg,
          rgba(var(--primary), 0.6) 20%,
          rgba(var(--primary)) 50%
        );
        /* тень под элементом */
        box-shadow: 0 0.5em 1em -0.2em rgba(var(--secondary), 0.5);
        /* полное скругление */
        border-radius: 100%;
        /* абсолютное позиционирование */
        position: absolute;
        /* рамка */
        border: 1px solid rgb(var(--secondary));
        /* отступ слева */
        left: 0;
        /* отступ сверху */
        top: 0;
        /* ширина */
        width: 100%;
        /* высота */
        height: 100%;
        /* флексбокс-модель */
        display: flex;
        /* горизонтальное выравнивание по центру */
        justify-content: center;
        /* вертикальное выравнивание по центру */
        align-items: center;
        /* смещение вниз для анимации нажатия */
        transform: translateY(-15%);
        /* анимация в течение 0,15 секунды */
        transition: 0.15s;
        /* цвет */
        color: rgb(var(--secondary));
      }
      /* стили переднего слоя в активном состоянии */
      .btn-class-name:active .front {
        /* без анимации нажатия */
        transform: translateY(0%);
        /* без тени */
        box-shadow: 0 0;
      }
    </style>
  </body>
</html>
